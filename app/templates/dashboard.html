{% extends "base.html" %}
{% block content %}
<style>
  .panel.hero,
  .panel.dashboard-grid,
  .panel.split {
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
  }
</style>
<section class="panel hero">
  <h1>Live Routing Metrics</h1>
  <p>Track tier distribution, cache hit rate, and estimated electrical savings vs all-cloud baseline.</p>
</section>

<section class="panel dashboard-grid">
  <div class="metric-card"><div class="metric-label">Total Requests</div><div class="metric-value" id="m-total">0</div></div>
  <div class="metric-card"><div class="metric-label">Cache Hits</div><div class="metric-value" id="m-cache">0</div></div>
  <div class="metric-card"><div class="metric-label">Escalations</div><div class="metric-value" id="m-escalations">0</div></div>
  <div class="stat-orb" id="latency-orb">
    <svg class="orb-progress" viewBox="0 0 120 120">
      <circle cx="60" cy="60" r="50" class="progress-bg"></circle>
      <circle cx="60" cy="60" r="50" class="progress-fill" id="latency-progress"></circle>
    </svg>
    <div class="orb-core">
      <div class="orb-label">Avg Latency</div>
      <div class="orb-value" id="m-latency">-</div>
      <div class="orb-unit">ms</div>
    </div>
  </div>
  <div class="stat-orb" id="energy-orb">
    <svg class="orb-progress" viewBox="0 0 120 120">
      <circle cx="60" cy="60" r="50" class="progress-bg"></circle>
      <circle cx="60" cy="60" r="50" class="progress-fill" id="energy-progress"></circle>
    </svg>
    <div class="orb-core">
      <div class="orb-label">Energy Used</div>
      <div class="orb-value" id="m-energy">-</div>
      <div class="orb-unit">kWh</div>
    </div>
  </div>
  <div class="stat-orb" id="saved-orb" style="border: 1px solid rgba(39, 215, 150, 0.4);">
    <svg class="orb-progress" viewBox="0 0 120 120">
      <circle cx="60" cy="60" r="50" class="progress-bg"></circle>
      <circle cx="60" cy="60" r="50" class="progress-fill" id="saved-progress" style="stroke: var(--green);"></circle>
    </svg>
    <div class="orb-core">
      <div class="orb-label emphasis">Energy Saved</div>
      <div class="orb-value" id="m-saved">-</div>
      <div class="orb-unit">kWh</div>
    </div>
  </div>
</section>

<section class="panel split">
  <div>
    <h3>Tier Mix</h3>
    <div class="bars">
      <div class="bar-row"><span>Search</span><div class="bar"><i id="b1"></i></div><span id="t1">0</span></div>
      <div class="bar-row"><span>Local</span><div class="bar"><i id="b2"></i></div><span id="t2">0</span></div>
      <div class="bar-row"><span>Cloud</span><div class="bar"><i id="b3"></i></div><span id="t3">0</span></div>
    </div>
  </div>
  <div>
    <h3>Recent Requests</h3>
    <div id="recent" class="recent-list">No requests yet.</div>
  </div>
</section>

<script src="/static/js/metrics.js?v=20260215c"></script>
{% endblock %}
